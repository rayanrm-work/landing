<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexora DZ - Votre Demande</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Open+Sans:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header class="header">
        <div class="container">
            <a href="index.html" class="logo">Nexora DZ</a>
            <div class="menu-toggle" id="mobile-menu">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <nav>
                <ul class="nav-links">
                    <li><a href="index.html#why-choose-us">Pourquoi Nous ?</a></li>
                    <li><a href="index.html#offers">Nos Offres</a></li>
                    <li><a href="index.html#contact">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section class="confirmation-page">
        <div class="container">
            <h2>Votre Demande de Devis</h2>
            <div class="confirmation-content">
                <h3>Merci pour votre int√©r√™t !</h3>
                <p>Veuillez v√©rifier le r√©capitulatif de votre demande ci-dessous. Nous vous contacterons tr√®s prochainement pour discuter des d√©tails et vous fournir un devis personnalis√©.</p>

                <div class="confirmation-summary">
                    <h4>R√©capitulatif des offres s√©lectionn√©es :</h4>
                    <ul id="selected-offers-list"></ul>
                    <div class="total-price">Total Estim√©: <span id="confirmation-total">0 DA</span></div>
                </div>

                <div class="confirmation-form">
                    <h4>Vos coordonn√©es pour la demande :</h4>
                    <form id="demand-form">
                        <input type="text" name="Nom" id="demand-name" placeholder="Votre Nom Complet" required>
                        <input type="email" name="Email" id="demand-email" placeholder="Votre Email" required>
                        <input type="tel" name="T√©l√©phone" id="demand-phone" placeholder="Votre Num√©ro de T√©l√©phone (ex: +213 5XX XXX XXX)" required>
                        <textarea name="Message" id="demand-message" placeholder="Des d√©tails suppl√©mentaires ou questions ? (Optionnel)"></textarea>
                        <button type="submit" class="btn">Envoyer via WhatsApp <i class="fab fa-whatsapp"></i></button>
                    </form>

                    <div id="demand-message-status" class="confirmation-message"></div>
                </div>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="container">
            <div class="footer-col logo-col">
                <a href="index.html" class="logo">Nexora DZ</a>
                <p>Votre partenaire pour des solutions digitales √©l√©gantes et performantes en Alg√©rie. Nous transformons vos ambitions en succ√®s concret.</p>
                <div class="social-links">
                    <a href="https://www.facebook.com/profile.php?id=61578220463897" aria-label="Facebook" target="_blank"><i class="fab fa-facebook-f"></i></a>
                    <a href="https://wa.me/213559387068" aria-label="WhatsApp" target="_blank"><i class="fab fa-whatsapp"></i></a>
                    <a href="https://www.instagram.com/nexora.dz/" aria-label="Instagram" target="_blank"><i class="fab fa-instagram"></i></a>
                </div>
            </div>

            <div class="footer-col">
                <h3>Liens Rapides</h3>
                <ul>
                    <li><a href="index.html#why-choose-us"><i class="fas fa-chevron-right"></i> Pourquoi Nous ?</a></li>
                    <li><a href="index.html#offers"><i class="fas fa-chevron-right"></i> Nos Offres</a></li>
                    <li><a href="index.html#contact"><i class="fas fa-chevron-right"></i> Contact</a></li>
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Politique de Confidentialit√©</a></li>
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Conditions G√©n√©rales</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>Contactez-nous</h3>
                <ul>
                    <li><a href="tel:+213559387068"><i class="fas fa-phone-alt"></i> +213 559 38 70 68</a></li>
                    <li><a href="mailto:dznexora@gmail.com"><i class="fas fa-envelope"></i> dznexora@gmail.com</a></li>
                    <li><a href="#"><i class="fas fa-map-marker-alt"></i> Bejaia, Alg√©rie</a></li>
                    <li><a href="#"><i class="fas fa-clock"></i> Sam - Jeu : 8h00 - 20h00</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Nexora DZ. Tous droits r√©serv√©s.</p>
        </div>
    </footer>

    <a href="https://wa.me/213559387068" class="whatsapp-btn" target="_blank" aria-label="Contactez-nous sur WhatsApp">
        <i class="fab fa-whatsapp"></i>
    </a>

    <script>
        document.getElementById('mobile-menu').addEventListener('click', function() {
            const navLinks = document.querySelector('.nav-links');
            this.classList.toggle('open');
            navLinks.classList.toggle('open');
        });

        document.addEventListener('DOMContentLoaded', () => {
            const selectedOffersList = document.getElementById('selected-offers-list');
            const confirmationTotalSpan = document.getElementById('confirmation-total');
            const demandForm = document.getElementById('demand-form');
            const demandMessageStatus = document.getElementById('demand-message-status');

            const savedCart = localStorage.getItem('nexoraCart');
            let cart = [];
            if (savedCart) {
                cart = JSON.parse(savedCart);
            }

            if (cart.length === 0) {
                window.location.href = 'index.html#offers';
                return;
            }

            let total = 0;
            selectedOffersList.innerHTML = '';

            cart.forEach(item => {
                const listItem = document.createElement('li');
                listItem.innerHTML = `
                    <span>${item.name}</span>
                    <span>${item.price === 0 ? 'Sur Devis' : item.price.toLocaleString('fr-DZ') + ' DA'}</span>
                `;
                selectedOffersList.appendChild(listItem);

                if (item.price !== 0) {
                    total += item.price;
                }
            });

            confirmationTotalSpan.textContent = total.toLocaleString('fr-DZ') + ' DA';

            const urlParams = new URLSearchParams(window.location.search);
            const messageFromCart = urlParams.get('message');
            if (messageFromCart) {
                document.getElementById('demand-message').value = decodeURIComponent(messageFromCart);
            }

            // G√©rer la soumission du formulaire
            demandForm.addEventListener('submit', function(event) {
    event.preventDefault(); // Emp√™cher le rechargement de la page

    const name = document.getElementById('demand-name').value;
    const email = document.getElementById('demand-email').value;
    const phone = document.getElementById('demand-phone').value;
    const message = document.getElementById('demand-message').value;

    let cart = JSON.parse(localStorage.getItem('nexoraCart')) || [];
    let offersText = '';
    let total = 0;

    cart.forEach(item => {
        offersText += `- ${item.name} : ${item.price === 0 ? 'Sur Devis' : item.price.toLocaleString('fr-DZ') + ' DA'}\n`;
        if (item.price !== 0) {
            total += item.price;
        }
    });

    const totalText = total ? `\nTotal estim√© : ${total.toLocaleString('fr-DZ')} DA` : '';

    const fullMessage =
        `üìã *Nouvelle Demande de Devis Nexora DZ*\n\n` +
        `üë§ *Nom* : ${name}\n` +
        `üìß *Email* : ${email}\n` +
        `üì± *T√©l√©phone* : ${phone}\n\n` +
        `üõí *Offres s√©lectionn√©es* :\n${offersText}${totalText}\n\n` +
        (message ? `üìù *Message* :\n${message}` : '');

    const whatsappURL = `https://wa.me/213559387068?text=${encodeURIComponent(fullMessage)}`;

    // Redirection vers WhatsApp
    window.open(whatsappURL, '_blank');

    // Vider le panier apr√®s envoi
    localStorage.removeItem('nexoraCart');
});


            const hiddenItems = document.getElementById('hidden-cart-items');
            const hiddenTotal = document.getElementById('hidden-cart-total');

            let content = "";
            cart.forEach(item => {
                content += `- ${item.name} : ${item.price === 0 ? 'Sur Devis' : item.price.toLocaleString('fr-DZ') + ' DA'}\n`;
            });

            hiddenItems.value = content;
            hiddenTotal.value = total.toLocaleString('fr-DZ') + ' DA';
        });
    </script>

</body>
</html>
